<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üê∏ Ultimate Pepe Faucet Pro</title>
    
    <!-- Enhanced Meta Tags -->
    <meta name="description" content="Next-generation PEPE coin earning platform with advanced features and gamification">
    <meta name="keywords" content="pepe, cryptocurrency, faucet, earn crypto, web3, blockchain">
    <meta name="author" content="Pepe Faucet Labs">
    
    <!-- Favicon -->
    <link rel="icon" type="image/jpeg" href="pepe.jpeg">
    
    <!-- CDN Dependencies -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/countup.js/2.0.7/countUp.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>

    <style>
        /* Advanced Color Palette */
        :root {
            /* Pepe-themed color scheme */
            --primary-pepe: #2ecc71;
            --secondary-pepe: #27ae60;
            --accent-purple: #9b59b6;
            --dark-background: #0f172a;
            --card-background: rgba(30, 41, 59, 0.9);
            --hover-background: rgba(51, 65, 85, 0.9);
            
            /* Enhanced semantic colors */
            --success-color: #2ecc71;
            --error-color: #e74c3c;
            --warning-color: #f39c12;
            --info-color: #3498db;
            
            /* Advanced shadow and glow effects */
            --primary-shadow: 0 8px 32px rgba(46, 204, 113, 0.3);
            --hover-shadow: 0 12px 48px rgba(46, 204, 113, 0.4);
            --neon-glow: 0 0 15px rgba(46, 204, 113, 0.5),
                         0 0 25px rgba(46, 204, 113, 0.3);
        }

        /* Advanced Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            scroll-behavior: smooth;
        }

        /* Animated Gradient Background */
        body {
            background: linear-gradient(
                135deg,
                var(--dark-background) 0%,
                #1a365d 50%,
                #0f172a 100%
            );
            color: #ffffff;
            min-height: 100vh;
            overflow-x: hidden;
            perspective: 1px;
        }

        /* Advanced Layout */
        .app-container {
            display: grid;
            grid-template-columns: 280px 1fr;
            min-height: 100vh;
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(10px);
        }

        /* Sidebar with Advanced Styling */
        .sidebar {
            background: var(--card-background);
            border-right: 1px solid rgba(255,255,255,0.1);
            padding: 30px;
            display: flex;
            flex-direction: column;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Navigation Enhancements */
        .nav-item {
            display: flex;
            align-items: center;
            padding: 15px 20px;
            margin: 10px 0;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .nav-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                135deg,
                var(--primary-pepe) 0%,
                var(--secondary-pepe) 100%
            );
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: -1;
        }

        .nav-item:hover::before,
        .nav-item.active::before {
            opacity: 0.1;
        }

        .nav-item i {
            margin-right: 15px;
            color: var(--primary-pepe);
            transition: transform 0.3s ease;
        }

        .nav-item:hover i {
            transform: scale(1.2);
        }

        /* Main Content Area */
        .main-content {
            display: grid;
            grid-template-rows: auto 1fr;
            padding: 30px;
            gap: 20px;
            overflow-y: auto;
        }

        /* Advanced Card Design */
        .card {
            background: var(--card-background);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255,255,255,0.1);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: var(--primary-shadow);
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(
                90deg,
                var(--primary-pepe) 0%,
                var(--accent-purple) 100%
            );
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .card:hover::before {
            opacity: 1;
        }

        /* Advanced Button Styles */
        .action-btn {
            background: linear-gradient(
                45deg,
                var(--primary-pepe),
                var(--secondary-pepe)
            );
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 12px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            position: relative;
            overflow: hidden;
        }

        .action-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                90deg,
                transparent,
                rgba(255,255,255,0.3),
                transparent
            );
            transition: left 0.5s ease;
        }

        .action-btn:hover::before {
            left: 100%;
        }

        /* Advanced Form Styles */
        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 10px;
            color: var(--primary-pepe);
            font-weight: 600;
        }

        .input-wrapper {
            position: relative;
        }

        .input-wrapper input {
            width: 100%;
            padding: 15px 50px 15px 20px;
            background: var(--hover-background);
            border: 2px solid rgba(255,255,255,0.1);
            border-radius: 12px;
            color: white;
            transition: all 0.3s ease;
        }

        .input-wrapper i {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--primary-pepe);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .app-container {
                grid-template-columns: 1fr;
            }
        }

        /* Additional Specialized Styles Here */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .stat-card {
            background: var(--hover-background);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        /* Advanced Achievement System */
        .achievements-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .achievement-card {
            background: var(--hover-background);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .achievement-card::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(
                90deg,
                var(--primary-pepe),
                var(--accent-purple)
            );
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .achievement-card:hover::after {
            opacity: 1;
        }

        /* Notification and Toast Styles */
        #toast-container > div {
            background: var(--card-background) !important;
            backdrop-filter: blur(10px);
            box-shadow: var(--primary-shadow);
        }

        /* Loading Animation */
        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid var(--primary-pepe);
            border-top-color: transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar Navigation -->
        <div class="sidebar">
            <div class="logo mb-4 text-center">
                <h1 class="text-2xl font-bold text-primary-pepe">üê∏ Pepe Faucet Pro</h1>
            </div>

            <!-- Navigation Items -->
            <nav>
                <div class="nav-item active" data-page="dashboard">
                    <i class="fas fa-home"></i> Dashboard
                </div>
                <div class="nav-item" data-page="claim">
                    <i class="fas fa-coins"></i> Claim Rewards
                </div>
                <div class="nav-item" data-page="tasks">
                    <i class="fas fa-tasks"></i> Daily Tasks
                </div>
                <div class="nav-item" data-page="achievements">
                    <i class="fas fa-trophy"></i> Achievements
                </div>
                <div class="nav-item" data-page="referral">
                    <i class="fas fa-users"></i> Referral Program
                </div>
                <div class="nav-item" data-page="withdraw">
                    <i class="fas fa-wallet"></i> Withdraw
                </div>
                <div class="nav-item" data-page="profile">
                    <i class="fas fa-user"></i> Profile
                </div>
            </nav>

            <!-- User Stats Mini Panel -->
            <div class="user-stats mt-auto">
                <div class="stat-item flex justify-between mb-2">
                    <span>Total Earned</span>
                    <strong id="totalEarned">0 PEPE</strong>
                </div>
                <div class="stat-item flex justify-between">
                    <span>Referrals</span>
                    <strong id="referralCount">0</strong>
                </div>
            </div>
        </div>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Dashboard Page -->
            <section id="dashboard" class="page active">
                <div class="card">
                    <h2 class="text-2xl mb-4">Dashboard Overview</h2>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <i class="fas fa-coins mb-2"></i>
                            <h3 class="text-lg">Total Balance</h3>
                            <p class="text-2xl font-bold" id="totalBalance">0 PEPE</p>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-gift mb-2"></i>
                            <h3 class="text-lg">Pending Rewards</h3>
                            <p class="text-2xl font-bold" id="pendingRewards">0 PEPE</p>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-chart-line mb-2"></i>
                            <h3 class="text-lg">Earnings This Week</h3>
                            <p class="text-2xl font-bold" id="weeklyEarnings">0 PEPE</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Claim Page -->
            <section id="claim" class="page" style="display:none;">
                <div class="card">
                    <h2 class="text-2xl mb-4">Claim Your PEPE Rewards</h2>
                    <div class="claim-info mb-4">
                        <p>Current Claim Rate: <span id="claimRate">800-2000PEPE</span> per claim</p>
                    </div>
                    <div class="claim-actions">
                        <button id="claimButton" class="action-btn w-full">
                            <i class="fas fa-hand-holding-usd"></i>
                            Claim Rewards
                            <span class="loading" style="display: none;"></span>
                        </button>
                    </div>
                    <div class="recent-claims mt-4">
                        <h3 class="text-lg mb-2">Recent Claims</h3>
                        <div id="recentClaimsList" class="space-y-2">
                            <!-- Recent claims will be dynamically populated -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Daily Tasks Page -->
            <section id="tasks" class="page" style="display:none;">
                <div class="card">
                    <h2 class="text-2xl mb-4">Daily Tasks</h2>
                    <div class="tasks-container" id="dailyTasksList">
                        <!-- Tasks will be dynamically populated -->
                        <div class="task-card">
                            <div class="task-header">
                                <h3 class="task-title">Daily Check-in</h3>
                                <span class="task-reward">+500 PEPE</span>
                            </div>
                            <div class="task-progress">
                                <div class="progress-bar" style="width: 0%;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Achievements Page -->
            <section id="achievements" class="page" style="display:none;">
                <div class="card">
                    <h2 class="text-2xl mb-4">Achievements</h2>
                    <div class="achievements-grid" id="achievementsList">
                        <!-- Achievements will be dynamically populated -->
                    </div>
                </div>
            </section>

            <!-- Referral Page -->
            <section id="referral" class="page" style="display:none;">
                <div class="card">
                    <h2 class="text-2xl mb-4">Referral Program</h2>
                    <div class="referral-stats mb-4">
                        <div class="stats-grid">
                            <div class="stat-card">
                                <i class="fas fa-users mb-2"></i>
                                <h3 class="text-lg">Total Referrals</h3>
                                <p class="text-2xl font-bold" id="totalReferrals">0</p>
                            </div>
                            <div class="stat-card">
                                <i class="fas fa-coins mb-2"></i>
                                <h3 class="text-lg">Referral Earnings</h3>
                                <p class="text-2xl font-bold" id="referralEarnings">0 PEPE</p>
                            </div>
                        </div>
                    </div>
                    <div class="referral-link-section">
                        <h3 class="text-lg mb-2">Your Referral Link</h3>
                        <div class="input-wrapper">
                            <input type="text" id="referralLink" readonly value="https://pepefaucet.pro/ref/UNIQUE_CODE">
                            <i class="fas fa-copy cursor-pointer" onclick="copyReferralLink()"></i>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Withdraw Page -->
            <section id="withdraw" class="page" style="display:none;">
                <div class="card">
                    <h2 class="text-2xl mb-4">Withdraw Earnings</h2>
                    <div class="withdraw-stats mb-4">
                        <div class="stats-grid">
                            <div class="stat-card">
                                <i class="fas fa-wallet mb-2"></i>
                                <h3 class="text-lg">Available Balance</h3>
                                <p class="text-2xl font-bold" id="withdrawBalance">0 PEPE</p>
                            </div>
                            <div class="stat-card">
                                <i class="fas fa-exchange-alt mb-2"></i>
                                <h3 class="text-lg">Minimum Withdraw</h3>
                                <p class="text-2xl font-bold">1000 PEPE</p>
                            </div>
                        </div>
                    </div>
                    <form id="withdrawForm" class="mt-4">
                        <div class="form-group">
                            <label>Withdraw Method</label>
                            <div class="input-wrapper">
                                <select class="w-full p-3 bg-hover-background rounded-lg">
                                    <option>FaucetPay</option>
                                    <option>Binance Pay</option>
                                    <option>MetaMask</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Withdraw Amount</label>
                            <div class="input-wrapper">
                                <input type="number" placeholder="Enter amount to withdraw" 
                                       min="1000" max="100000" step="100">
                                <i class="fas fa-coins"></i>
                            </div>
                        </div>
                        <button type="submit" class="action-btn w-full">
                            <i class="fas fa-paper-plane"></i>
                            Withdraw Earnings
                        </button>
                    </form>
                </div>
            </section>

            <!-- Profile Page -->
            <section id="profile" class="page" style="display:none;">
                <div class="card">
                    <h2 class="text-2xl mb-4">User Profile</h2>
                    <div class="profile-header mb-4">
                        <div class="profile-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="profile-info">
                            <h3 id="profileUsername">PepeLover123</h3>
                            <p id="profileEmail">user@pepefaucet.pro</p>
                        </div>
                    </div>
                    <div class="profile-stats">
                        <div class="stats-grid">
                            <div class="stat-card">
                                <i class="fas fa-level-up-alt mb-2"></i>
                                <h3 class="text-lg">Current Level</h3>
                                <p class="text-2xl font-bold" id="userLevel">1</p>
                            </div>
                            <div class="stat-card">
                                <i class="fas fa-calendar-alt mb-2"></i>
                                <h3 class="text-lg">Member Since</h3>
                                <p class="text-2xl font-bold" id="memberSince">Jan 2024</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Modals -->
    <div id="achievementModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-card-background p-6 rounded-lg max-w-md w-full">
            <h2 class="text-2xl mb-4 text-primary-pepe">üèÜ New Achievement Unlocked!</h2>
            <div id="achievementModalContent" class="text-center">
                <!-- Achievement details will be dynamically populated -->
            </div>
            <button onclick="closeAchievementModal()" class="action-btn mt-4 w-full">
                Close
            </button>
        </div>
    </div>

    <script>
        // Advanced Configuration
        const CONFIG = {
            FAUCET: {
                MIN_CLAIM: 800,
                MAX_CLAIM: 2000,
                CLAIM_COOLDOWN: 3600 // 1 hour in seconds
            },
            ACHIEVEMENTS: [
                {
                    id: 'FIRST_CLAIM',
                    title: 'First Pepe Claimed',
                    description: 'Make your first PEPE claim',
                    reward: 100,
                    icon: 'fas fa-gift'
                },
                {
                    id: 'REFERRAL_MASTER',
                    title: 'Referral Master',
                    description: 'Refer 10 friends',
                    reward: 500,
                    icon: 'fas fa-users'
                },
                {
                    id: 'MILLIONAIRE',
                    title: 'Pepe Millionaire',
                    description: 'Earn 1,000,000 PEPE',
                    reward: 1000,
                    icon: 'fas fa-coins'
                }
            ],
            DAILY_TASKS: [
                {
                    id: 'DAILY_CLAIM',
                    title: 'Daily Claim',
                    description: 'Claim rewards 5 times today',
                    target: 5,
                    reward: 1000
                },
                {
                    id: 'REFERRAL_TASK',
                    title: 'Spread the Word',
                    description: 'Refer 3 new users',
                    target: 3,
                    reward: 750
                }
            ]
        };

        // Advanced User Class
        class PepeFaucetUser {
            constructor() {
                this.initializeUserData();
                this.setupEventListeners();
            }

            initializeUserData() {
                // Initialize or load user data from local storage
                this.userData = JSON.parse(localStorage.getItem('pepeFaucetUser')) || {
                    username: 'PepeLover',
                    email: '',
                    totalEarned: 0,
                    referralCount: 0,
                    level: 1,
                    achievements: [],
                    dailyTasks: {},
                    lastClaim: 0
                };
            }

            setupEventListeners() {
                // Navigation event listeners
                $('.nav-item').on('click', function() {
                    $('.nav-item').removeClass('active');
                    $(this).addClass('active');
                    
                    const page = $(this).data('page');
                    $('.page').hide();
                    $(`#${page}`).show();
                });

                // Claim button listener
                $('#claimButton').on('click', () => this.claimRewards());

                // Withdraw form listener
                $('#withdrawForm').on('submit', (e) => {
                    e.preventDefault();
                    this.processWithdraw();
                });
            }

            claimRewards() {
                const now = Date.now();
                const timeSinceLastClaim = now - this.userData.lastClaim;

                // Check claim cooldown
                if (timeSinceLastClaim < CONFIG.FAUCET.CLAIM_COOLDOWN * 1000) {
                    toastr.warning(`Please wait ${Math.ceil((CONFIG.FAUCET.CLAIM_COOLDOWN * 1000 - timeSinceLastClaim) / 1000)} seconds before next claim`);
                    return;
                }

                // Generate random claim amount
                const claimAmount = Math.floor(Math.random() * 
                    (CONFIG.FAUCET.MAX_CLAIM - CONFIG.FAUCET.MIN_CLAIM + 1) + 
                    CONFIG.FAUCET.MIN_CLAIM);

                // Update user data
                this.userData.totalEarned += claimAmount;
                this.userData.lastClaim = now;

                // Check and update achievements
                this.checkAchievements();

                // Update daily tasks
                this.updateDailyTasks('claim');

                // Save user data
                this.saveUserData();

                // Update UI
                this.updateUserInterface();

                // Show success notification
                toastr.success(`Claimed ${claimAmount} PEPE!`);
            }

            checkAchievements() {
                CONFIG.ACHIEVEMENTS.forEach(achievement => {
                    // Example achievement check logic
                    if (achievement.id === 'FIRST_CLAIM' && this.userData.totalEarned > 0 &&
                        !this.userData.achievements.includes('FIRST_CLAIM')) {
                        this.unlockAchievement(achievement);
                    }

                    if (achievement.id === 'MILLIONAIRE' && 
                        this.userData.totalEarned >= 1000000 &&
                        !this.userData.achievements.includes('MILLIONAIRE')) {
                        this.unlockAchievement(achievement);
                    }
                });
            }

            unlockAchievement(achievement) {
                this.userData.achievements.push(achievement.id);
                
                // Show achievement modal
                $('#achievementModalContent').html(`
                    <i class="${achievement.icon} text-4xl mb-4 text-primary-pepe"></i>
                    <h3 class="text-xl mb-2">${achievement.title}</h3>
                    <p class="mb-4">${achievement.description}</p>
                    <p class="font-bold">+${achievement.reward} XP</p>
                `);
                $('#achievementModal').removeClass('hidden');
            }

            updateDailyTasks(taskType) {
                // Update daily task progress
                CONFIG.DAILY_TASKS.forEach(task => {
                    if (task.type === taskType) {
                        if (!this.userData.dailyTasks[task.id]) {
                            this.userData.dailyTasks[task.id] = { 
                                progress: 0, 
                                completed: false,
                                date: new Date().toDateString()
                            };
                        }

                        const dailyTask = this.userData.dailyTasks[task.id];
                        
                        // Check if task is for today
                        if (dailyTask.date !== new Date().toDateString()) {
                            dailyTask.progress = 0;
                            dailyTask.completed = false;
                            dailyTask.date = new Date().toDateString();
                        }

                        dailyTask.progress++;

                        if (dailyTask.progress >= task.target) {
                            dailyTask.completed = true;
                            toastr.success(`Daily Task Completed: ${task.title}`);
                        }
                    }
                });

                this.saveUserData();
                this.updateTaskUI();
            }

            updateTaskUI() {
                const taskList = CONFIG.DAILY_TASKS.map(task => {
                    const userTask = this.userData.dailyTasks[task.id] || 
                        { progress: 0, completed: false };
                    
                    const progressPercent = Math.min(
                        (userTask.progress / task.target) * 100, 
                        100
                    );

                    return `
                        <div class="task-card ${userTask.completed ? 'completed' : ''}">
                            <div class="task-header">
                                <h3 class="task-title">${task.title}</h3>
                                <span class="task-reward">+${task.reward} PEPE</span>
                            </div>
                            <p class="task-description">${task.description}</p>
                            <div class="task-progress">
                                <div class="progress-bar" style="width: ${progressPercent}%"></div>
                            </div>
                            <div class="task-status">
                                ${userTask.progress}/${task.target}
                            </div>
                        </div>
                    `;
                }).join('');

                $('#dailyTasksList').html(taskList);
            }

            processWithdraw() {
                const withdrawAmount = parseFloat($('#withdrawForm input[type="number"]').val());
                
                // Validate withdraw amount
                if (withdrawAmount < 1000) {
                    toastr.error('Minimum withdrawal is 1000 PEPE');
                    return;
                }

                if (withdrawAmount > this.userData.totalEarned) {
                    toastr.error('Insufficient balance');
                    return;
                }

                // Process withdrawal
                this.userData.totalEarned -= withdrawAmount;
                
                // Simulate withdrawal process
                const withdrawalTransaction = {
                    id: `WD-${Date.now()}`,
                    amount: withdrawAmount,
                    method: $('#withdrawForm select').val(),
                    timestamp: new Date().toISOString()
                };

                // Add to withdrawal history (if implemented)
                if (!this.userData.withdrawalHistory) {
                    this.userData.withdrawalHistory = [];
                }
                this.userData.withdrawalHistory.push(withdrawalTransaction);

                // Save user data
                this.saveUserData();

                // Update UI
                this.updateUserInterface();

                // Show success notification
                toastr.success(`Successfully withdrew ${withdrawAmount} PEPE`);
            }

            saveUserData() {
                localStorage.setItem('pepeFaucetUser', JSON.stringify(this.userData));
            }

            updateUserInterface() {
                // Update dashboard stats
                $('#totalEarned').text(`${this.userData.totalEarned.toLocaleString()} PEPE`);
                $('#totalBalance').text(`${this.userData.totalEarned.toLocaleString()} PEPE`);
                $('#referralCount').text(this.userData.referralCount || 0);
                $('#profileUsername').text(this.userData.username);
                $('#profileEmail').text(this.userData.email);
                $('#userLevel').text(this.userData.level);
                $('#withdrawBalance').text(`${this.userData.totalEarned.toLocaleString()} PEPE`);

                // Update achievements
                this.updateAchievementsUI();
                this.updateTaskUI();
            }

            updateAchievementsUI() {
                const achievementsList = CONFIG.ACHIEVEMENTS.map(achievement => {
                    const unlocked = this.userData.achievements.includes(achievement.id);
                    
                    return `
                        <div class="achievement-card ${unlocked ? 'unlocked' : ''}">
                            <i class="${achievement.icon} achievement-icon"></i>
                            <h3 class="text-lg mb-2">${achievement.title}</h3>
                            <p class="mb-4">${achievement.description}</p>
                            <div class="achievement-status">
                                ${unlocked ? 'Unlocked' : 'Locked'}
                            </div>
                        </div>
                    `;
                }).join('');

                $('#achievementsList').html(achievementsList);
            }

            referUser(referralCode) {
                // Implement referral logic
                this.userData.referralCount = (this.userData.referralCount || 0) + 1;
                
                // Check referral achievements
                this.checkAchievements();
                
                // Save user data
                this.saveUserData();
                
                // Update UI
                this.updateUserInterface();
            }
        }

        // Utility Functions
        function copyReferralLink() {
            const referralLink = $('#referralLink');
            navigator.clipboard.writeText(referralLink.val()).then(() => {
                toastr.success('Referral link copied to clipboard!');
            }).catch(err => {
                toastr.error('Failed to copy link');
            });
        }

        function closeAchievementModal() {
            $('#achievementModal').addClass('hidden');
        }

        // Toastr Configuration
        toastr.options = {
            "closeButton": true,
            "progressBar": true,
            "positionClass": "toast-bottom-right",
            "preventDuplicates": true,
            "showDuration": "300",
            "hideDuration": "1000",
            "timeOut": "5000",
            "extendedTimeOut": "1000",
            "showEasing": "swing",
            "hideEasing": "linear",
            "showMethod": "fadeIn",
            "hideMethod": "fadeOut"
        };

        // Application Initialization
        $(document).ready(function() {
            // Check if user is logged in
            const isLoggedIn = localStorage.getItem('isLoggedIn');
            if (!isLoggedIn) {
                // Redirect to login page or show login modal
                window.location.href = 'login.html';
                return;
            }

            // Initialize the Pepe Faucet User
            const pepeFaucetUser = new PepeFaucetUser();

            // Initial UI update
            pepeFaucetUser.updateUserInterface();

            // Referral Link Generation
            const userEmail = localStorage.getItem('userEmail');
            if (userEmail) {
                const referralCode = generateReferralCode(userEmail);
                $('#referralLink').val(`https://pepefaucet.pro/ref/${referralCode}`);
            }
        });

        // Referral Code Generator
        function generateReferralCode(email) {
            // Simple referral code generation based on email
            const hash = CryptoJS.MD5(email).toString();
            return hash.substring(0, 8).toUpperCase();
        }

        // Logout Function
        function logout() {
            localStorage.removeItem('isLoggedIn');
            localStorage.removeItem('userEmail');
            localStorage.removeItem('pepeFaucetUser');
            window.location.href = 'login.html';
        }
    </script>

    <!-- Preload Critical Fonts and Icons -->
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" as="style">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
</body>
</html>
